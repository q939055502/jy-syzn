# 禁用和启用标准接口实现计划

## 1. 实现目标
为检测规范添加禁用和启用功能，允许通过API接口修改检测规范的状态。

## 2. 技术栈
- FastAPI
- SQLAlchemy
- Pydantic

## 3. 实现内容

### 3.1 服务层实现
在 `DetectionStandardService` 类中添加两个静态方法：
1. `enable_standard(standard_id)`：将规范状态设置为1（有效）
2. `disable_standard(standard_id)`：将规范状态设置为0（作废）

### 3.2 路由层实现
在 `standards.py` 中添加两个PATCH路由：
1. `@router.patch("/standards/{standard_id}/enable")`：启用指定规范
2. `@router.patch("/standards/{standard_id}/disable")`：禁用指定规范

## 4. 具体实现步骤

1. **更新服务层**：
   - 文件：`app/services/detection/detection_standard_service.py`
   - 添加 `enable_standard` 方法
   - 添加 `disable_standard` 方法
   - 方法逻辑：检查规范是否存在，更新状态，返回更新后的规范

2. **更新路由层**：
   - 文件：`app/routes/detection/standards.py`
   - 添加启用规范的路由
   - 添加禁用规范的路由
   - 使用 `ResponseModel` 作为响应模型
   - 处理可能的错误情况

## 5. 实现细节

- 状态值：1=有效，0=作废
- HTTP方法：使用PATCH方法，符合RESTful API设计规范
- 错误处理：处理规范不存在、更新失败等情况
- 响应格式：与现有API保持一致，使用 `ResponseModel`

## 6. 测试要点

- 启用不存在的规范，应返回404
- 禁用不存在的规范，应返回404
- 启用已启用的规范，应返回成功
- 禁用已禁用的规范，应返回成功
- 更新后的状态应正确反映在响应中

## 7. 代码风格

- 遵循现有代码风格
- 添加适当的注释
- 保持方法签名与现有方法一致
- 使用与现有代码相同的错误处理方式