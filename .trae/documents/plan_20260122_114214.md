# 扩展分类状态递归管理功能到检测对象、检测项目和检测参数

## 功能需求
1. **分类（Category）**：已完成
   - 禁用分类时，递归禁用其所有子类和关联的检测对象
   - 启用分类时，无特殊处理

2. **检测对象（DetectionObject）**：
   - 禁用检测对象时，递归禁用其所有关联的检测项目
   - 启用检测对象时，递归启用其所属分类

3. **检测项目（DetectionItem）**：
   - 禁用检测项目时，递归禁用其所有关联的检测参数
   - 启用检测项目时，递归启用其所属检测对象和分类

4. **检测参数（DetectionParam）**：
   - 禁用检测参数时，无特殊处理（没有下级实体）
   - 启用检测参数时，递归启用其所属检测项目、检测对象和分类

## 技术分析
- **实体关系**：Category → DetectionObject → DetectionItem → DetectionParam（一对多关系）
- **现有实现**：已完成Category的递归状态管理
- **需要修改**：DetectionObjectService、DetectionItemService、DetectionParamService的update方法
- **递归逻辑**：
  - 禁用时：向下递归禁用所有下级实体
  - 启用时：向上递归启用所有上级实体

## 实现步骤

### 1. 修改DetectionObjectService.update方法
- **位置**：`app/services/detection/detection_object_service.py`
- **功能**：添加状态变更时的递归处理逻辑
- **核心逻辑**：
  - 当更新状态为禁用(0)时，递归禁用所有关联的检测项目
  - 当更新状态为启用(1)时，递归启用其所属分类

### 2. 修改DetectionItemService.update方法
- **位置**：`app/services/detection/detection_item_service.py`
- **功能**：添加状态变更时的递归处理逻辑
- **核心逻辑**：
  - 当更新状态为禁用(0)时，递归禁用所有关联的检测参数
  - 当更新状态为启用(1)时，递归启用其所属检测对象和分类

### 3. 修改DetectionParamService.update方法
- **位置**：`app/services/detection/detection_param_service.py`
- **功能**：添加状态变更时的递归处理逻辑
- **核心逻辑**：
  - 当更新状态为禁用(0)时，无特殊处理
  - 当更新状态为启用(1)时，递归启用其所属检测项目、检测对象和分类

### 4. 实现相关递归方法
- **递归禁用检测项目**：在DetectionObjectService中实现
- **递归禁用检测参数**：在DetectionItemService中实现
- **递归启用上级实体**：在各服务中实现

## 测试计划
1. **禁用检测对象测试**：
   - 创建测试数据：分类A → 检测对象B → 检测项目C → 检测参数D
   - 禁用检测对象B，验证检测项目C和检测参数D都被禁用

2. **启用检测项目测试**：
   - 创建测试数据：分类A(禁用) → 检测对象B(禁用) → 检测项目C(禁用) → 检测参数D(禁用)
   - 启用检测项目C，验证检测对象B和分类A都被启用

3. **启用检测参数测试**：
   - 创建测试数据：分类A(禁用) → 检测对象B(禁用) → 检测项目C(禁用) → 检测参数D(禁用)
   - 启用检测参数D，验证检测项目C、检测对象B和分类A都被启用

## 预期效果
- 所有实体的状态管理更加智能，减少手动操作
- 确保整个检测体系的状态一致性
- 提高系统的易用性和数据完整性