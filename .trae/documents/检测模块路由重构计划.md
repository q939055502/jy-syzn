# 检测模块路由重构计划

## 1. 重构目标
将 `app/routes/detection.py` 重构为一个包结构，将不同类型的路由拆分到独立文件中，提高代码的可维护性和可读性。

## 2. 重构方案

### 2.1 目录结构设计
```
app/routes/detection/
├── __init__.py          # 路由注册入口
├── categories.py        # 分类相关路由
├── standards.py         # 检测规范相关路由
├── groups.py            # 检测项目组相关路由
├── items.py             # 检测项目相关路由
├── guides.py            # 检测指南相关路由
├── templates.py         # 委托单模板相关路由
└── calculations.py      # 计算相关路由（样品检测规则、组批计算、送检要求）
```

### 2.2 文件拆分规则
- **categories.py**: 包含所有分类相关的CRUD路由
- **standards.py**: 包含所有检测规范相关的CRUD路由
- **groups.py**: 包含所有检测项目组相关的CRUD路由
- **items.py**: 包含所有检测项目相关的CRUD路由和检测项目与指南关联路由
- **guides.py**: 包含所有检测指南相关的CRUD路由
- **templates.py**: 包含所有委托单模板相关的CRUD路由
- **calculations.py**: 包含样品检测规则查询、组批计算、送检要求计算路由

### 2.3 路由注册机制
- 在 `__init__.py` 中创建主路由实例
- 从各个子模块导入路由并注册到主路由
- 保持原有路由前缀 `/api/detection` 和标签 `["detection"]` 不变

### 2.4 依赖管理
- 保持原有依赖不变，包括服务类导入和扩展依赖
- 避免循环导入问题

## 3. 重构步骤

1. 创建 `app/routes/detection` 目录
2. 创建 `__init__.py` 文件，设置主路由
3. 创建各个子模块文件，将对应路由从 detection.py 迁移到各个文件
4. 在 `__init__.py` 中导入并注册所有子路由
5. 更新主路由导入，确保应用能正确加载重构后的路由
6. 测试所有路由功能，确保重构后功能正常

## 4. 预期效果
- 代码结构更加清晰，便于维护和扩展
- 不同功能模块分离，职责单一
- 提高代码可读性，便于新开发人员理解
- 便于后续功能扩展和代码复用

## 5. 注意事项
- 保持原有路由路径和方法不变，避免影响现有客户端
- 确保所有导入路径正确，避免运行时错误
- 测试所有路由功能，确保重构后功能正常
- 遵循项目现有的代码风格和命名规范