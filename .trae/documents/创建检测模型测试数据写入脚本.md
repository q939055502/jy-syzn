# 检测模型测试数据写入脚本计划

## 1. 脚本目标
创建一个测试脚本，用于往 `d:/Projects/jy_syzn/app/models/detection` 目录下的所有模型对应的数据库表中写入测试数据。

## 2. 脚本结构
- 脚本名称：`test_detection_data.py`
- 位置：项目根目录 `d:/Projects/jy_syzn/`
- 遵循项目现有测试脚本结构

## 3. 脚本功能
1. 连接数据库（使用开发环境配置）
2. 导入所有检测相关模型
3. 创建测试数据（按模型关系顺序）
4. 写入数据库
5. 验证写入结果

## 4. 测试数据设计
- **Category（分类）**：创建2个顶级分类和2个子分类
- **DetectionStandard（检测规范）**：创建3个检测规范
- **DetectionGroup（检测项目组）**：创建3个检测项目组，关联不同分类和规范
- **DetectionItem（检测项目）**：每个项目组创建2-3个检测项目
- **DetectionGuide（检测指南）**：为每个项目组创建一个检测指南
- **DelegationFormTemplate（委托单模板）**：为每个项目组创建1-2个委托单模板

## 5. 实现步骤
1. 导入必要模块（os, sys, datetime等）
2. 添加项目根目录到Python路径
3. 加载配置并初始化数据库
4. 导入所有检测相关模型
5. 创建测试数据函数
6. 主函数执行写入操作
7. 添加异常处理和日志

## 6. 模型关系处理顺序
1. 先创建Category（分类）
2. 再创建DetectionStandard（检测规范）
3. 然后创建DetectionGroup（检测项目组），关联分类和规范
4. 接着创建DetectionItem（检测项目），关联项目组
5. 再创建DetectionGuide（检测指南），关联项目组
6. 最后创建DelegationFormTemplate（委托单模板），关联项目组

## 7. 测试数据示例
- Category："水泥检测", "混凝土检测", "水泥物理性能", "水泥化学分析"
- DetectionStandard："GB/T 175-2024 通用硅酸盐水泥", "GB/T 50081-2019 混凝土物理力学性能试验方法标准"
- DetectionGroup："水泥物理性能检测", "水泥化学分析检测", "混凝土抗压强度检测"
- DetectionItem："水泥细度", "水泥安定性", "水泥凝结时间", "水泥抗压强度"
- DetectionGuide：包含采样要求、判定依据等信息
- DelegationFormTemplate：包含模板名称、版本、文件路径等信息

## 8. 脚本特点
- 遵循项目现有代码风格和规范
- 包含详细的注释说明
- 支持异常处理
- 可以重复执行（使用upsert或先删除后插入）
- 输出执行结果和统计信息