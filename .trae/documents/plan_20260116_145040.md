# 初始化脚本整合和废弃表修复计划

## 1. 整合初始化脚本

### 1.1 创建script目录
- 在`d:rojectsy_syzn`下创建`script`目录

### 1.2 分析现有初始化脚本
- `init_user_data.py`：初始化用户、角色、权限和检测相关数据
- `init_permission_resources.py`：初始化权限资源、动作和范围

### 1.3 整合脚本到一个文件
- 创建`d:rojectsy_syzncriptnit_all.py`文件
- 将两个初始化脚本的功能整合到一个文件中
- 保留各个功能模块的独立性，通过函数调用实现

## 2. 修复废弃group表问题

### 2.1 查找废弃模型引用
- 检查`app/dal/base_dal.py`中对`DetectionGroup`的处理
- 检查`detection_test_data.py`中对`DetectionGroup`的使用
- 检查`app/models/detection/delegation_form_template.py`中的引用

### 2.2 移除废弃模型的创建
- 检查数据库表创建逻辑，确保不创建废弃的group表
- 移除`init_user_data.py`中对废弃表的清理逻辑
- 移除`base_dal.py`中对`DetectionGroup`的特殊处理

### 2.3 检查其他相关文件
- 检查是否有其他文件引用了废弃的`DetectionGroup`模型
- 确保所有引用都被移除或更新

## 3. 测试整合后的脚本

### 3.1 运行整合后的脚本
- 确保脚本能够正常执行
- 检查数据库表是否正确创建
- 确保废弃的group表不再被创建

### 3.2 验证数据初始化
- 检查用户、角色、权限数据是否正确初始化
- 检查检测相关数据是否正确初始化

## 4. 更新文档

### 4.1 更新README或其他文档
- 说明初始化脚本的位置和使用方法
- 说明废弃表的处理情况

## 详细执行步骤

1. 创建`script`目录
2. 创建`init_all.py`文件，整合两个初始化脚本的功能
3. 修改`app/dal/base_dal.py`，移除对`DetectionGroup`的特殊处理
4. 修改`init_user_data.py`，移除对废弃表的清理逻辑
5. 检查并移除其他文件中对`DetectionGroup`的引用
6. 测试整合后的脚本
7. 验证数据库表创建情况
8. 更新相关文档