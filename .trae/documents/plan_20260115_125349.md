# 送样指南判定依据与检测规范表关联实施计划

## 调整说明

根据用户补充信息，当前数据库是测试环境，可以删表/库重建，因此**不需要保留`judge_basis`冗余字段**，将直接移除该字段并实施多对多关系。

## 实施步骤

### 1. 修改关联表定义

在`app/models/associations.py`中添加送样指南与检测规范的多对多关联表。

### 2. 更新DetectionGuide模型

修改`app/models/detection/detection_guide.py`：
- 移除`judge_basis`字段
- 添加与检测规范的多对多关系
- 更新`to_dict`方法，支持返回检测规范信息

### 3. 更新相关API代码

检查并更新送样指南相关的API代码，确保：
- 创建送样指南时可以接收`standard_ids`列表
- 更新送样指南时可以处理检测规范关联
- 删除送样指南时自动删除关联关系

### 4. 测试验证

- 测试送样指南的创建、更新、删除功能
- 验证检测规范关联是否正确建立
- 测试查询送样指南时是否能正确返回关联的检测规范

## 预期效果

- 送样指南的判定依据只能选择检测规范表中存在的规范
- 支持一个送样指南关联多个检测规范
- 数据一致性和完整性得到保障
- 查询效率优化，支持双向查询

## 实施时间

预计需要30分钟完成全部实施和测试。