## 实现计划

### 1. 更新UserUpdate schema
- 在UserUpdate模型中添加`is_active`字段，允许通过更新用户接口修改激活状态
- 字段类型：Optional[bool]
- 描述：是否激活用户

### 2. 添加单独的激活/禁用用户接口
- 接口路径：`PATCH /api/admin/users/{user_id}/toggle-active`
- 请求参数：
  - `user_id`：路径参数，用户ID
  - `is_active`：查询参数，是否激活用户（可选）
- 响应：更新后的用户对象
- 权限：仅管理员

### 3. 在UserAdminService中添加对应方法
- 方法名：`toggle_user_active`
- 参数：`user_id`和`is_active`
- 功能：更新用户的is_active字段
- 返回：更新后的用户对象

### 4. 实现逻辑
- 如果提供了`is_active`参数，直接设置用户的激活状态
- 如果未提供`is_active`参数，切换用户当前的激活状态（激活→禁用，禁用→激活）
- 添加适当的错误处理
- 更新Redis缓存，确保数据一致性

### 5. 文档更新
- 更新API文档，添加新接口的说明
- 更新用户更新接口的文档，说明支持is_active字段

### 6. 测试建议
- 测试单独的激活/禁用接口
- 测试通过更新用户接口修改激活状态
- 测试切换逻辑（未提供is_active参数时）
- 测试错误情况（用户不存在等）

## 技术方案

1. **接口设计**：使用PATCH方法，符合RESTful设计原则
2. **参数设计**：支持显式设置和自动切换两种模式
3. **缓存处理**：更新后清除用户缓存，确保数据一致性
4. **错误处理**：返回适当的HTTP状态码和错误信息
5. **权限控制**：继承现有的管理员权限检查

## 预期效果

1. 提供了便捷的用户激活/禁用操作接口
2. 支持通过两种方式修改用户激活状态
3. 提高了代码的可读性和可维护性
4. 与系统中其他状态切换接口保持一致的设计风格
5. 便于后续添加日志记录和审计功能